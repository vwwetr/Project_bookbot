# ---------------------------
# PostgreSQL main config file
# Generated by Ansible (DO NOT EDIT MANUALLY)
# ---------------------------

# Basic settings
port = {{ postgres_port }}
listen_addresses = '{{ postgres_listen }}'
max_connections = {{ postgres_max_connections }}

# Authentication & Encryption
password_encryption = '{{ postgres_password_encryption }}'

# SSL / TLS
ssl = {% if postgres_ssl %}on{% else %}off{% endif %}
{% if postgres_ssl %}
ssl_cert_file = '{{ postgres_ssl_cert }}'
ssl_key_file = '{{ postgres_ssl_key }}'
{% if postgres_ssl_ca is defined and postgres_ssl_ca %}
ssl_ca_file = '{{ postgres_ssl_ca }}'
{% endif %}
{% endif %}

# Logging
log_destination = '{{ postgres_log_destination }}'
logging_collector = {{ postgres_logging_collector }}
log_line_prefix = '{{ postgres_log_line_prefix }}'

# Performance tuning
shared_buffers = '{{ postgres_shared_buffers }}'
work_mem = '{{ postgres_work_mem }}'
maintenance_work_mem = '{{ postgres_maintenance_work_mem }}'
effective_cache_size = '{{ postgres_effective_cache_size }}'

# Custom parameters (optional)
{% if postgres_custom_parameters is defined and postgres_custom_parameters %}
{% for key, value in postgres_custom_parameters.items() %}
{% if value is string %}
{{ key }} = '{{ value }}'
{% else %}
{{ key }} = {{ value }}
{% endif %}
{% endfor %}
{% endif %}