## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω–Ω—ã–µ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
    - –ù–∞–∑–≤–∞–Ω–∏–µ: `title VARCHAR(255) NOT NULL UNIQUE`
        - üîò –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–∞—â–∏–≤–∞—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞:"
    - –ê–≤—Ç–æ—Ä: `author VARCHAR(50)`
        - üîò –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–í–≤–µ–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "–§–∞–º–∏–ª–∏—è –ò.–û. –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ "–ë–µ–∑ –∞–≤—Ç–æ—Ä–∞":"
    - –†–∞–∑–¥–µ–ª `section VARCHAR(50) NOT NULL`
        - üîò –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –æ—Ç–Ω–µ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å (IT, Health, Finance, Lifestyle, Network, Spiritual):"
        - IT
        - Health
        - Finance
        - Lifestyle
        - Network
        - Spiritual
    - –§–æ—Ä–º–∞—Ç `format VARCHAR(50) NOT NULL`
        - üîò –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–í–≤–µ–¥–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ä–µ—Å—É—Ä—Å–∞ (Book, Article, Video, Audio):"
        - Book
        - Article
        - Video
        - Audio
    - –í—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è (–º–∏–Ω.) `studytime INTEGER NOT NILL`
        - üîò –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–í–≤–µ–¥–∏—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –≤–∞–º –≤—Ä–µ–º—è –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ, –≤ –º–∏–Ω. (15, 30, 60, 90, 120):"
    - –°—Å—ã–ª–∫–∞ (–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏) `link TEXT`
        - üîò –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ—Å—É—Ä—Å –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ "–ù–µ—Ç URL":"
    - –ö–æ–ª–æ–Ω–∫–∞ "normalized_title"
        - –£–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º, –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–∏–∂–Ω–µ–º—Ü —Ä–µ–≥–∏—Å—Ç—Ä—É, —É–¥–∞–ª—è–µ—Ç –¥–∏–∞–∫—Ä–∏—Ç–∏–∫—É, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –≤—ã—á–∏—Å–ª—è–µ–º—ã–π —Å—Ç–æ–ª–±–µ—Ü
        - –ü–æ –Ω–µ–º—É —Å—Ç–æ–∏—Ç UNIQUE, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ "–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥—É–±–ª–µ–π"
        - unaccent - stable, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è (–Ω–µ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–π);
        - –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ PostgreSQL –ø—Ä—è–º–æ —Å–∫–∞–∑–∞–Ω–æ: –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è generated-–∫–æ–ª–æ–Ω–∫–∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ IMMUTABLE-—Ñ—É–Ω–∫—Ü–∏–∏.
        - –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
            - String normalized = normalizeTitle(title); // lower + trim + unaccent
### –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
- –†–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
## –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- üîò –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É–∂–µ –∏–º–µ—é—â–µ–≥–æ—Å—è –≤ –ë–î –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –±–æ—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–≤–æ–¥–∏—Ç—å "–≠—Ç–æ—Ç —Ä–µ—Å—É—Ä—Å —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ!"
- üîò –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–µ—Å—É—Ä—Å–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑—É—á–µ–Ω–∏—è, –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å–≤–∏—è –ª—é–±—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –±–æ—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–≤–æ–¥–∏—Ç—å "–†–µ—Å—É—Å—Ä—Å–æ–≤ –ø–æ —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –µ—â–µ –Ω–µ—Ç –≤ –±–∞–∑–µ!"
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞, —Ñ–æ—Ä–º–∞—Ç–∞, –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø–∏—Å–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "–Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç" –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã –Ω–∞ –≤—ã–±–æ—Ä –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞;
- üîò –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ –ø—Ä–∏ –µ–≥–æ –Ω–∞–ª–∏—á–∏–∏ –≤ –ë–î:
    -  ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –º–µ—Ç–æ–¥ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —Å–µ—Ä–≤–∏—Å–Ω–æ–º —Å–ª–æ–µ (Service Layer), —á—Ç–æ–±—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ä–µ—Å—É—Ä—Å–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.
- üîò –í–æ–∑–º–æ–∂–Ω–æ, –≤–º–µ—Å—Ç–æ "–í–≤–µ–¥–∏—Ç–µ" –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å "–í—ã–±–µ—Ä–∏—Ç–µ" –∏ –¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±—Ä–∞—Ç—å —Å–∞–º–æ–º—É –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ç–µ–ª–µ–≥—Ä–∞–º.
- üîò –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–±–æ—Ç) –¥–æ–ª–∂–Ω–æ –ª–∏–±–æ:
    - –ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç—å ¬´—Ç–∞–∫–∞—è –∫–Ω–∏–≥–∞ —É–∂–µ –µ—Å—Ç—å¬ª
    - –ª–∏–±–æ –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π —Å–ø—Ä–æ—Å–∏—Ç—å –ë–î: ¬´–µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–∏–≥–∞?¬ª.
## –†–æ–ª–∏ –∏ –∏—Ö –ø—Ä–∞–≤–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
- postgres (DB-—Ä–æ–ª—å, —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
    - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–ª–∞—Å—Ç–µ—Ä—É PostgreSQL.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞.
- db_admin_role (NOLOGIN)
    - –í–ª–∞–¥–µ–ª–µ—Ü –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `learningbot`.
    - –ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å DDL –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î, –≤–∫–ª—é—á–∞—è `DROP DATABASE`.
    - –ù–µ —è–≤–ª—è–µ—Ç—Å—è SUPERUSER.
    - –ò–º–µ–µ—Ç read-only –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º: SELECT –Ω–∞ —Ç–∞–±–ª–∏—Ü—ã –∏ USAGE/SELECT –Ω–∞ sequences (–¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ pg_dump).
- db_admin_user (LOGIN)
    - –ß–ª–µ–Ω `db_admin_role`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –∑–∞–¥–∞—á –±–µ–∑ —Å—É–ø–µ—Ä–ø—Ä–∞–≤.
    - –ú–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ SELECT –∏ pg_dump, –∞ —Ç–∞–∫–∂–µ DROP DATABASE (–∫–∞–∫ –≤–ª–∞–¥–µ–ª–µ—Ü —á–µ—Ä–µ–∑ —Ä–æ–ª—å).
- bookbot (app_group_role, NOLOGIN)
    - –ì—Ä—É–ø–ø–æ–≤–∞—è —Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –≤—Å–µ DML-–ø—Ä–∞–≤–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ.
    - –ü—Ä–∞–≤–∞:
        - CONNECT, TEMP –Ω–∞ –±–∞–∑—É `learningbot`.
        - USAGE –Ω–∞ —Å—Ö–µ–º—É `public` (–±–µ–∑ CREATE).
        - SELECT, INSERT, UPDATE, DELETE –Ω–∞ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ `public`.
        - USAGE, SELECT, UPDATE –Ω–∞ –≤—Å–µ sequences –≤ `public`.
    - –ù–µ –∏–º–µ–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã—Ö –ø—Ä–∞–≤ (CREATEDB, CREATEROLE, SUPERUSER).
- app_user (LOGIN)
    - –ß–ª–µ–Ω `bookbot`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (Spring Boot).
    - –¢–æ–ª—å–∫–æ DML-–ø—Ä–∞–≤–∞, –±–µ–∑ CREATE/DDL.
- db_migrator_user (LOGIN)
    - –†–æ–ª—å –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π (DDL).
    - –ß–ª–µ–Ω `bookbot` –∏ –∏–º–µ–µ—Ç CREATE –Ω–∞ `public`.
    - –í—Å–µ –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç—Ç–æ–π —Ä–æ–ª—å—é, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω—É–∂–Ω—ã–µ –ø—Ä–∞–≤–∞ (—á–µ—Ä–µ–∑ ALTER DEFAULT PRIVILEGES).
- readonly_user (LOGIN)
    - Read-only –¥–æ—Å—Ç—É–ø.
    - CONNECT –Ω–∞ –ë–î, USAGE –Ω–∞ `public`, SELECT –Ω–∞ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, USAGE/SELECT –Ω–∞ –≤—Å–µ sequences.
- db_backup (LOGIN)
    - –î–æ—Å—Ç—É–ø –¥–ª—è `pg_dump`.
    - CONNECT –Ω–∞ –ë–î, USAGE –Ω–∞ `public`, SELECT –Ω–∞ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, USAGE/SELECT –Ω–∞ –≤—Å–µ sequences.
## DDL, DML, DCL, TCL
- DDL (CREATE/ALTER/DROP)
    - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–æ–ª—å—é `db_migrator_user`.
    - CREATE –≤ `public` –≤—ã–¥–∞–Ω —Ç–æ–ª—å–∫–æ —ç—Ç–æ–π —Ä–æ–ª–∏.
- DML (SELECT/INSERT/UPDATE/DELETE)
    - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `app_user` (—á–ª–µ–Ω `bookbot`).
    - `readonly_user`, `db_backup`, `db_admin_user` ‚Äî —Ç–æ–ª—å–∫–æ SELECT.
- DCL (GRANT/REVOKE, ALTER DEFAULT PRIVILEGES)
    - –ü—Ä–∏–º–µ—Ä:
        - GRANT <–ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏> ON <–æ–±—ä–µ–∫—Ç—ã> TO <—Ä–æ–ª–∏>;
        - ALTER DEFAULT PRIVILEGES: ‚Äú–¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤ –±—É–¥—É—â–µ–º —Å–æ–∑–¥–∞—Å—Ç db_migrator_user –≤ —Å—Ö–µ–º–µ public, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞—Ç—å GRANT —Ç–∞–∫–∏—Ö-—Ç–æ –ø—Ä–∞–≤ —Ç–∞–∫–∏–º-—Ç–æ —Ä–æ–ª—è–º‚Äù.
- TCL (BEGIN/COMMIT/ROLLBACK)
    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π/—Å–∫—Ä–∏–ø—Ç–æ–≤.
## –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–í –ª–æ–≥–∏–∫–µ –±–æ—Ç–∞ / Spring Boot:
    - –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –∫–Ω–∏–≥–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—à—å –ø–æ–ª–µ title –∫–∞–∫ –µ—Å—Ç—å;
    - –ë–î –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç: ¬´–¥–≤–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–≥–∏—Å—Ç—Ä–æ–º, –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏ –¥–∏–∞–∫—Ä–∏—Ç–∏–∫–æ–π, –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ –º–æ–≥—É—Ç¬ª.
    - –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ ¬´–µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–∫–∞—è –∫–Ω–∏–≥–∞¬ª, –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Ç–æ –∂–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ:
```sql
SELECT *
FROM books
WHERE lower(trim(unaccent(title))) = lower(trim(unaccent(:title_in)));
``` 
    - –µ—Å–ª–∏ –ø–æ–ø—ã—Ç–∞–µ—à—å—Å—è –≤—Å—Ç–∞–≤–∏—Ç—å ¬´–ª–æ–≥–∏—á–µ—Å–∫–∏–π –¥—É–±–ª—å¬ª ‚Äî –ø–æ–π–º–∞–µ—à—å unique constraint violation –ø–æ –∏–Ω–¥–µ–∫—Å—É books_normalized_title_unique
## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∫–∞–ø–∞
- pg_dump (custom, –≤—ã–±—Ä–∞–Ω –ø–æ best practise –∫–∞–∫ –Ω–∞–∏–±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π)
    - pg_dump –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ Node4 (backup/monitoring-–Ω–æ–¥–∞) –ø–æ–¥ —Å–µ—Ä–≤–∏—Å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º pg_backup, –ø–æ–¥–∫–ª—é—á–∞—è—Å—å –∫ Node1 –ø–æ TCP.
- pg_restore 
    - –ò–∑ database –Ω–æ–¥—ã
- –î–∞–º–ø –ø–æ–≤–µ—Å–∏—Ç—å –Ω–∞ –∫—Ä–æ–Ω—Ç–∞–± 
    - –ù–∞ –∫–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ª–∏–Ω—É–∫—Å, –≤ –∫–∞–∫—É—é —Ä–æ–ª—å –ø–æ—Å—Ç–≥—Ä–µ—Å, —Å –∫–∞–∫–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ –≤ –∫–∞–∫—É—é –ë–î?
- –ö—É–¥–∞ –∫–∏–¥–∞–µ–º –¥–∞–º–ø –∏ –æ—Ç–∫—É–¥–∞ —Å—Ç–∞—Ä—Ç—É–µ–º pg_restore?
    - –ü–æ–∫–∞ –∏–¥–µ—è –∫–∏–¥–∞—Ç—å –¥–∞–º–ø –Ω–∞ –≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–æ–¥—ã, –∫—Ä–æ–º–µ database, –≥–¥–µ –±–∞–∑–∞ –∫—Ä—É—Ç–∏—Ç—Å—è
    - Node1: —Ç–æ–ª—å–∫–æ Postgres, –±–µ–∑ –¥–æ–ª–≥–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤ (–º–∞–∫—Å–∏–º—É–º ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–ø–∏—è –Ω–∞ –ø–∞—Ä—É –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤).
        - –î–∞–Ω–Ω—ã–µ —á–∏—Ç–∞–µ–º –≤—Å–µ–≥–¥–∞ —Å primary (Node1) ‚Äî –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–µ—Ç.
    - Node4: –æ—Å–Ω–æ–≤–Ω–æ–π backup-—Ö–æ—Å—Ç (—Ç–∞–º –∂–µ Pg-–∫–ª–∏–µ–Ω—Ç, —Å–∫—Ä–∏–ø—Ç—ã, cron, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞ —á–µ—Ä–µ–∑ Zabbix).
    - –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ ‚Äî Node4, —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏/–≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞ —á–µ—Ä–µ–∑ Zabbix.
    - Node5: –∑–∞–ø–∞—Å–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–≤–Ω—É—Ç—Ä–∏–∫–ª–∞—Å—Ç–µ—Ä–Ω–∞—è –∫–æ–ø–∏—è –Ω–∞ localhost).
    - –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –∫–æ–ø–∏—è –±—ç–∫–∞–ø–æ–≤ —Å Node4 –Ω–∞ Node5.
    - –í–Ω–µ—à–Ω–µ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç –±—ç–∫–∞–ø–æ–≤ (—Å Node4 –∏–ª–∏ Node5) –Ω–∞ —Ö–æ—Å—Ç–æ–≤—ã–π Mac / –≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫. Mac host / –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: off-site —É—Ä–æ–≤–µ–Ω—å.
## Drop Database
```sh
ls -1t /var/backups/postgresql/app_bot/*.dump.gz | head -1 # –ù–∞ –Ω–æ–¥–µ —Å –¥–∞–º–ø–æ–º

```
## Database debug
```sh
sudo less /var/spool/cron/db_backup # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫—Ä–æ–Ω:
sudo less /opt/postgresql/app_bot/sql/pg_backup.sh # –°–∫—Ä–∏–ø—Ç –¥–∞–º–ø–∞ (–Ω–∞ –Ω–æ–¥–µ Logging)
sudo systemctl status postgresql-16.service -l # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞ —Å –ª–æ–≥–æ–º: 
sudo journalctl -xeu postgresql-16.service | tail -n 50 # –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∂—É—Ä–Ω–∞–ª–∞: 
psql -h 192.168.56.210 -U app_user -d learningbot # –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ: 
sudo -u postgres -i & psql -d learningbot #–ó–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –ø–æ–¥ postgres (—Ç–æ–ª—å–∫–æ —Å –Ω–æ–¥—ã db)
sudo -i; cd /var/backups/postgresql/app_bot #–î–∞–º–ø—ã –ë–î
sudo less /var/log/cron #–î–∞–º–ø—ã –ë–î
# PostgeSQL:
\? # –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Ç–∞–∫–æ–º–∞–Ω–¥ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ psql
\h # –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö SQL-–∫–æ–º–∞–Ω–¥
\x # –†–∞—Å—à–∏—Ä–∏—Ç—å –≤—ã–≤–æ–¥ 
\x auto # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤—ã—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ
\l # 
SELECT current_user; # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; 
SELECT * FROM pg_roles; #  –ü–æ–∫–∞–∑–∞—Ç—å –≤–æ–æ–±—â–µ –≤—Å—ë, —á—Ç–æ –±–∞–∑–∞ –∑–Ω–∞–µ—Ç –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–æ–ª—è—Ö
SELECT * FROM pg_stat_activity; # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –±–∞–∑–µ
\drg # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ —Ä–æ–ª—è—Ö –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Ö –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
\dp # –í—ã–≤–æ–¥–∏—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (ACL) –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π.
\du (\dg) # –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –∏ –∏—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
\dp public.book_id_seq # –≤—ã–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (pg_class.relacl) –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ. 
/var/log/pgbackup/app_bot
```